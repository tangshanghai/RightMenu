<!doctype html> <html lang=en> <head> <meta charset=UTF-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta http-equiv=X-UA-Compatible content="ie=edge"> <title>右键菜单测试</title> <style>*{margin:0;padding:0;box-sizing:border-box;font-size:12px}body,html{width:100%;height:100%}#app{width:100%;height:100%;position:relative}.btn{position:absolute}#btn2{right:0;top:0}#btn3{top:50%;left:50%}#btn4{left:0;bottom:0}#btn5{right:0;bottom:0}</style> </head> <body> <div id=app> <button id=btn1 class=btn>左上角</button> <button id=btn2 class=btn>右上角</button> <button id=btn3 class=btn>中间</button> <button id=btn4 class=btn>左下角</button> <button id=btn5 class=btn>右下角</button> </div> <script type="text/javascript" src="RightMenu.js"></script></body> <script> var rightMenu = new RightMenu();
    var btns = document.querySelectorAll('.btn');
    btns.forEach(ele=>{
        ele.addEventListener('contextmenu',contextmenuHandler);
    })
    const testMenu = [
                {
                    title: '快速布局',
                    mark: 'layout_group',
                    menus: [
                        {
                            title:'拷贝当前场景布局',
                            mark:'layout_copy'
                        },
                        {
                            title:'粘贴布局到当前场景',
                            mark:'layout_paste_current',
                            disabled: true,
                        },
                        {
                            title:'将当前应用到全部',
                            mark:'layout_apply_all'
                        },
                        {
                            title:'将当前应用到前面',
                            mark:'layout_apply_prev'
                        },
                        {
                            title:'将当前应用到后面',
                            mark:'layout_apply_next'
                        },
                    ]
                },
                {
                    title: '重置位置',
                    mark: 'reset_pos_group',
                    menus: [
                        {
                            title: '重置背景位置',
                            mark: 'reset_pos_bg',
                            checked: false
                        },
                        {
                            title: '重置主素材位置',
                            mark: 'reset_pos_main',
                            checked: false
                        },
                        {
                            title: '重置数字人位置',
                            mark: 'reset_pos_digitalHuman',
                            checked: false
                        },
                        {
                            title: '重置原文字幕位置',
                            mark: 'reset_pos_originalText',
                            checked: false
                        },
                        {
                            title: '重置译文字幕位置',
                            mark: 'reset_pos_translationText',
                            checked: false
                        }
                    ]
                },
                {
                    title: '锁定图层',
                    mark: 'lock_group',
                    menus: [
                        {
                            title: '锁定背景层',
                            mark: 'lock_bg',
                            checked: false
                        },
                        {
                            title: '锁定主素材层',
                            mark: 'lock_main',
                            checked: false
                        },
                        {
                            title: '锁定数字人层',
                            mark: 'lock_digitalHuman',
                            checked: false
                        },
                        {
                            title: '锁定原文字幕层',
                            mark: 'lock_originalText',
                            checked: false
                        },
                        {
                            title: '锁定译文字幕层',
                            mark: 'lock_translationText',
                            checked: false
                        },
                        {
                            title: '锁定装饰层1',
                            mark: 'lock_decoration1',
                            checked: false
                        },
                        {
                            title: '锁定装饰层2',
                            mark: 'lock_decoration2',
                            checked: false
                        },
                        {
                            title: '锁定装饰层3',
                            mark: 'lock_decoration3',
                            checked: false
                        },
                        {
                            title: '锁定装饰层4',
                            mark: 'lock_decoration4',
                            checked: false
                        }
                    ]
                },
                {
                    divider: true
                },
                {
                    title:'锁定全部图层',
                    mark:'lock_all'
                },
                {
                    title:'解锁全部图层',
                    mark:'unlock_all'
                }
            ]
    function contextmenuHandler(event){
        event.preventDefault();
        event.stopPropagation();
        console.log(event)
        
        let options = {
            menus:[
            {
                    title: '显示TC码',
                    mark: 'tc_time',
                    menus: [
                        {
                            title: '时码位置',
                            mark: 'tc_time_pos',
                            menus: [
                                {
                                    title: '左上',
                                    mark: 'tc_left_top',
                                },
                                {
                                    title: '左下',
                                    mark: 'tc_left_bottom',
                                },
                                {
                                    title: '右上',
                                    mark: 'tc_right_top',
                                },
                                {
                                    title: '右下',
                                    mark: 'tc_right_bottom',
                                    checked: true
                                },
                                {
                                    title: '居中',
                                    mark: 'tc_center_center',
                                }
                            ]
                        },
                        {
                            title: '全部显示',
                            mark: 'tc_time_show_all',
                            checked: false
                        },
                        {
                            title: '视频',
                            mark: 'tc_time_show_v',
                            checked: false
                        },
                        {
                            title: '音频子子孙孙子子孙孙子子孙孙子子孙孙子子孙孙子子孙孙',
                            mark: 'tc_time_show_a',
                            checked: false
                        }
                    ]
                },
                {
                    divider: true
                },
                {
                    title:'属性xxxxxxxxxxxxxxxxxxAAA',
                    mark:'property'
                },
                {
                    title:'属性222xxxxxxxxxxxxxxxxxxAAA',
                    shortKey: 'Alt+B',
                    mark:'1',
                    checked: true
                },
                {
                    title:'menu2',
                    mark:'2',
                    menus:[
                        {
                            title:'menu2-1',
                            mark:'2-1'
                        },
                        {
                            title:'menu2-2',
                            mark:'2-2',
                            menus:[
                                {
                                    title:'menu2-2-1',
                                    mark:'2-2-1',
                                    checked: true
                                },
                                {
                                    title:'menu2-2-2',
                                    mark:'2-2-2',
                                    checked: false
                                }
                            ]
                        }
                    ]   
                },
                {
                    divider: true
                },
                {
                    title:'menu3',
                    shortKey: 'Alt+N',
                    disabled: true,
                    mark:'3'
                },
                {
                    title:'menu4',
                    shortKey: 'Alt+K',
                    mark:'4'
                },
                {
                    title:'menu5',
                    shortKey: 'Alt+K',
                    mark:'5',
                    menus:[
                        {
                            title:'menu5-1',
                            mark:'5-1'
                        },
                        {
                            title:'menu5-2',
                            mark:'5-2',
                            menus:[
                                {
                                    title:'menu5-2-1',
                                    mark:'5-2-1'
                                },
                                {
                                    title:'menu5-2-2',
                                    mark:'5-2-2'
                                }
                            ]
                        }
                    ]  
                }
            ],
            event:event
        };
        options.menus = testMenu;
        rightMenu.show(options,(mark)=>{
            console.log('asdfsafsafdsafdsadfsafsafsdfa',mark);
        })
    } </script> </html>